# Job_Parser_DB

Программа позволяет находить вакансии заданных компаний на сайте [hh.ru](https://hh.ru/) и сохранять их в базу данных.

:page_facing_up: ТЗ находится [здесь](https://skyengpublic.notion.site/5-1006b67899fb4ce1bd97668c09352453)

### Как установить программу: 
1. Клонировать этот проект по ссылке в нужную папку.
2. Установить зависимости
    + для poetry:
        - активировать виртуальное окружение из командной строки при помощи команды **poetry shell**
        - запустить в терминале из корневой папки проекта команду **poetry install**
    + для venv:
        - активировать виртуальное окружение из командной строки командой **venv\Scripts\activate.bat** (для Windows) или **venv/bin/activate** (Linux и macOS)
        - запустить в терминале из корневой папки проекта команду **pip install -r requirements.txt**  
3. Установить пользовательские параметры для подключения к базе данных в файлы.
    + *Job_Parser_DB/database/db_config_starting.ini* - параметры уже существующей базы данных
    + *Job_Parser_DB/database/db_config_target.ini* - параметры новой базы данных
> *Можно только подставить актуальный пароль от базы данных пользователя, можно поменять и остальные параметры при необходимости.*
4. Программа готова к запуску.
___________________________________________

### Как работать с программой (рекомендуемый сценарий): 
1. При активированном виртуальном окружении запустить в командной строке файл из корневой папки проекта командой **python main.py**;
2. _* Очистить таблицы базы данных при помощи команды **clear db**_;
3. В меню выбрать пункт **find employers** и ввести название искомой компании;
4. Добавить выбранную компанию (или компании) в словарь при помощи команды **add employers**, указав в поле ввода id компании. Прервать цикл ввода id можно командой **stop**;
5. Найти вакансии добавленных компаний по ключевому слову при помощи команды **find vacancies**; 
6. Сохранить добавленные компании и вакансии в базу данных при помощи команды **save to db**;
7. Войти в режим взаимодействия с базой данных и выбрать соответствующую команду из меню для вывода результатов одного из предлагаемых SQL-запросов. Можно выбирать несколько команд вывода результатов в пределах одной сессии;
8. Выйти из режима взаимодействия с базой данных **exit**. Результаты запросов сохранятся в лог-файл;
9. Выйти из программы, набрав **exit** в основном меню.
    
   _* **clear db** необязательно исполнять, если планируется добавить новые значения к уже существующим в базе данных_

Пример основного меню:
![Вид основного меню](http://joxi.ru/krDZkQyCd5JVV2.jpg)

Пример меню взаимодействия с базой данных:
![Вид меню взамодействия с базой данных](http://joxi.ru/a2XdYNPTpLDO02.jpg)

:pushpin: Примечания:
* невозможно найти вакансии, не добавив в словарь хотя бы одну компанию;
* команда **clear employers** очистит как словарь с компаниями, так и с вакансиями;
* заработная плата, указанная для вакансии в иностранной валюте, автоматически переводится в эквивалентную сумму в рублях по актуальному курсу центробанка РФ для возможности сравнения;
* более подробную информацию о вакансии или компании можно посмотреть, перейдя по ссылке, которая принадлежит соответствующему объекту;
* результаты SQL-запросов сохраняются в лог-файл, описание есть в logs/readme.txt;
* если база данных не будет очищена при помощи команды **clear db**, таблицы будут пополняться новыми вакансиями и компаниями;
* если база данных не пуста, можно сразу переходить в режим взаимодействия с ней и получать результаты SQL-запросов на основе уже существующих данных.
